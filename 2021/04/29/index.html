<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ä½¿ç”¨ iproute2 å®¢è£½åŒ–ä½ çš„ Container ç¶²è·¯ | Yiyu&#39;s Dev Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨ iproute2 å®¢è£½åŒ–ä½ çš„ Container ç¶²è·¯">
<meta property="og:url" content="https://blog.yiyu0x.org/2021/04/29/index.html">
<meta property="og:site_name" content="Yiyu&#39;s Dev Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-04-29T12:40:21.000Z">
<meta property="article:modified_time" content="2025-04-12T20:59:43.591Z">
<meta property="article:author" content="yiyu0x">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/" title="Yiyu's Dev Blog">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yiyu&#39;s Dev Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">ğŸ–ï¸</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.yiyu0x.org"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-ä½¿ç”¨-iproute2-å®¢è£½åŒ–ä½ çš„-Container-ç¶²è·¯" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/29/" class="article-date">
  <time class="dt-published" datetime="2021-04-29T12:40:21.000Z" itemprop="datePublished">2021-04-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ä½¿ç”¨ iproute2 å®¢è£½åŒ–ä½ çš„ Container ç¶²è·¯
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <html><head></head><body><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘å€‘éƒ½çŸ¥é“ Docker æœ‰æä¾›ä¸åŒçš„ç¶²è·¯æ¨¡å¼ä¾›æˆ‘å€‘ä½¿ç”¨ï¼Œå¾é è¨­çš„ Bridge åˆ°å…±ç”¨æœ¬æ©Ÿ Network Namespace çš„ Hostã€‚æˆ‘å€‘ç”šè‡³å¯ä»¥è‡ªè¨‚è‡ªå·±çš„ Bridge ä¾†åˆ‡å‰²ä¸åŒç¶²æ®µï¼Œå¦‚æ­¤ä¸€ä¾†ä¸€äº›ç¶²è·¯æ‹“å¢£éƒ½æ¶è¨­éƒ½å¯ä»¥ç”¨ Docker ä¾†å®Œæˆã€‚</p>
<p>å€åˆ¥ä¸åŒç¶²æ®µæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨ä¸åŒçš„ Bridge ä¾†åˆ†éš”ï¼Œé€šå¸¸æœƒå…ˆå»ºç«‹è‡ªè¨‚çš„ Bridge</p>
<p><code>docker network create --driver bridge testing-bridge</code></p>
<p>ä¹‹å¾Œå»ºç«‹ container æ™‚å¯ä»¥æŒ‡å®šè©² bridge ä¾†ä½¿ç”¨è©²ç¶²è·¯ç©ºé–“</p>
<p><code>docker run -it --net=testing-bridge alpine</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ # ip a</span><br><span class="line">1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">35: eth0@if36: <BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN> mtu 1500 qdisc noqueue state UP</span><br><span class="line">    link/ether 02:42:ac:12:00:02 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.18.0.2/16 brd 172.18.255.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></tbody></table></figure>

<p>é€™æ™‚å€™å¯ä»¥ç™¼ç¾ Docker å¹«æˆ‘å»ºç«‹å¥½äº† <code>172.18.0.2/16</code> ç¶²æ®µçš„ä»‹é¢å¯ä»¥ä½¿ç”¨ï¼Œé€™æ™‚å€™ä½ æœƒç™¼ç¾è©²ä»‹é¢å¯ä»¥ç›´æ¥å‡ºå¾—å»å¤–ç¶²ï¼Œå› ç‚º Docker å»ºç«‹å¥½ Bridgeï¼Œæ‰€ä»¥å°åŒ…æœƒå¾è©² Bridge åˆ°æœ¬æ©Ÿç«¯å‡ºå»ã€‚</p>
<p>é‚£æˆ‘å€‘å¯ä¸å¯ä»¥ä¸è¦è®“ Container æœ‰æ©Ÿæœƒå¾æœ¬æ©Ÿè®“å°åŒ…æµå‡ºå»å‘¢ï¼Ÿ</p>
<p>ï¼ˆæœ‰æ™‚å€™è¦å»ºç«‹ç¶²è·¯æ‹“å¢£ï¼Œä¸å¸Œæœ›å°åŒ…èµ°æœ¬æ©Ÿçš„è·¯ç”±å‡ºå»ï¼Œå¸Œæœ›å°åŒ…å¾è©²ç¶²è·¯è·¯ç”±åˆ°å…¶ä»–ç¶²è·¯ï¼Œä¹Ÿå°±æ˜¯å…¶ä»– Containerï¼‰</p>
<h2 id="è§£æ±ºï¼ˆä½¿ç”¨-veth-peerï¼‰"><a href="#è§£æ±ºï¼ˆä½¿ç”¨-veth-peerï¼‰" class="headerlink" title="è§£æ±ºï¼ˆä½¿ç”¨ veth peerï¼‰"></a>è§£æ±ºï¼ˆä½¿ç”¨ veth peerï¼‰</h2><p>è¦é”æˆé€™ä»¶äº‹ï¼Œæœ€å¿«çš„åšæ³•å°±æ˜¯è‡ªå·±å»ºç«‹ veth ä¸¦ä¸”å°‡ peer å…©ç«¯ç›´æ¥ç¶åœ¨å…©å€‹ Container ä¸Š</p>
<p>æˆ‘å€‘æ‰“ç®—ç”¨ iproute2 ç›´æ¥ç®¡ç†ç¶²è·¯ï¼Œæ‰€ä»¥å»ºç«‹ containers æ™‚ä½¿ç”¨ <code>--net=none</code></p>
<p><code>docker run -itd --name=left --net=none alpine</code><br><code>docker run -itd --name=right --net=none alpine</code></p>
<p>æ¥è‘—éœ€è¦è‡ªè¡Œå»ºç«‹ Containers å€‘çš„ Network Namespace</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">left_pid=$(docker inspect -f '{{.State.Pid}}' left)`</span><br><span class="line">right_pid=$(docker inspect -f '{{.State.Pid}}' right)`</span><br><span class="line">sudo mkdir -p /var/run/netns</span><br><span class="line">sudo ln -s /proc/$left_pid/ns/net /var/run/netns/$left_pid</span><br><span class="line">sudo ln -s /proc/$right_pid/ns/net /var/run/netns/$right_pid</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥è‘—å»ºç«‹ veth peer ä¸¦ä¸”å‘½åç‚º <code>A</code> ä»¥åŠ <code>B</code></p>
<p><code>ip link add A type veth peer name B</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip link set A netns $left_pid # è¨­å®š peer ç«¯ A åˆ° left container</span><br><span class="line">ip netns exec $left_pid ip link set dev A name eth0 # è¨­å®š namespace ä¸­çš„ä»‹é¢åç¨±</span><br><span class="line">ip netns exec $left_pid ip link set eth0 up # å•Ÿå‹•ä»‹é¢</span><br><span class="line">ip netns exec $left_pid ip addr add 10.113.1.1/24 dev eth0 # è¨­å®š IP</span><br><span class="line">#ip netns exec $left_pid ip route add default via 10.113.1.254</span><br></pre></td></tr></tbody></table></figure>

<p>æ–°å¢é è¨­è·¯ç”±çš„éƒ¨åˆ†è¨»è§£æ‰æ˜¯å› ç‚ºæˆ‘å€‘å°‡ Containers ç”¨ veth peer æ¥èµ·ä¾†ï¼Œæœ¬ä¾†å°±æ˜¯é€šçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æœ‰é è¨­è·¯ç”±ä¹Ÿå¯ä»¥åˆ°é”å¦å¤–ä¸€å€‹ Containerã€‚å¯ä»¥ä¾ç…§æƒ…æ³å»è¨­å®šä½ çš„é è¨­è·¯ç”±</p>
<p>æ¥è‘—è¨­å®š Container right</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip link set B netns $right_pid</span><br><span class="line">ip netns exec $right_pid ip link set dev B name eth0</span><br><span class="line">ip netns exec $right_pid ip link set eth0 up</span><br><span class="line">ip netns exec $right_pid ip addr add 10.113.1.2/24 dev eth0</span><br><span class="line">#ip netns exec $right_pid ip route add default via 10.113.1.254</span><br></pre></td></tr></tbody></table></figure>

<p>è¨­å®šå®Œä¹‹å¾Œé€²å» Containers ä½ æœƒç™¼ç¾ä»–çš„ç¶²è·¯ä»‹é¢ç‚º</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@docker-env:~$ docker exec -it left sh</span><br><span class="line">/ # ip a</span><br><span class="line">1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">33: eth0@if32: <BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN> mtu 1500 qdisc noqueue state UP qlen 1000</span><br><span class="line">    link/ether 4e:1b:e1:22:8c:05 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.113.1.1/24 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸¦ä¸”å¯ä»¥ç›´æ¥ ping åˆ°å¦å¤–ä¸€å€‹ Container</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ # ping 10.113.1.2</span><br><span class="line">PING 10.113.1.2 (10.113.1.2): 56 data bytes</span><br><span class="line">64 bytes from 10.113.1.2: seq=0 ttl=64 time=0.062 ms</span><br><span class="line">64 bytes from 10.113.1.2: seq=1 ttl=64 time=0.155 ms</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æ­¤ä¸€ä¾†å¯ä»¥ç”¨æ­¤æ¦‚å¿µï¼ˆæ­é… Bridgeï¼‰å®Œæˆä¸€äº›è¤‡é›œçš„ç¶²è·¯æƒ…å¢ƒ</p>
<h2 id="ä½¿ç”¨-Bridge"><a href="#ä½¿ç”¨-Bridge" class="headerlink" title="ä½¿ç”¨ Bridge"></a>ä½¿ç”¨ Bridge</h2><p>å¯¦éš›çš„ç¶²è·¯æƒ…æ³ä¸å¤ªå¯èƒ½éƒ½ç”¨ peer å»æ¥ï¼Œå°±é”æˆä¸€å€‹å€ç¶²å…§æœ‰å¤šå° Host é‚„æ˜¯éœ€è¦ä½¿ç”¨ Linux Bridgeã€‚å°±åƒ Docker é è¨­çš„ Bridge æ¨¡å¼èˆ¬ï¼Œé‚£æˆ‘å€‘å¯ä¸å¯ä»¥ä¸è¦é€é Dockerï¼Œè‡ªå·±å»ºç«‹ Bridge ä¾†é”æˆç¶²è·¯éš”é›¢ï¼Œç­”æ¡ˆæ˜¯å¯ä»¥ã€‚è‡ªå·±å»ºç«‹çš„è©±ä½ æœƒç™¼ç¾ Docker é™¤äº†æŠŠ Bridge å»ºç«‹å¥½ä»¥å¤–ï¼Œé‚„æœƒä½¿ç”¨ iptables æŠŠ Container ä¸­çš„æµé‡å¾ Host å¾€å¤–é€ï¼Œæˆ‘å€‘å¦‚æœä¸æƒ³è¦è®“å°åŒ…æœ‰æ©Ÿæœƒå¾ Host æµå‡ºï¼Œè‡ªå·±å»ºç«‹ Bridge æŠŠ veth peer ä¸€ç«¯æ¥ä¸Š Container ä¸€ç«¯æ¥ä¸Š Bridge ä¹Ÿæ˜¯ä¸€å€‹æ–¹æ³•ï¼</p>
<p>é¦–å…ˆï¼Œä¸€æ¨£å»ºç«‹å…©å€‹ Containers</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --network=none --name left alpine</span><br><span class="line">docker run -itd --network=none --name right alpine</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ä¸‹ä¾†æ‰‹å‹•å»ºç«‹ Linux Bridge</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brctl addbr br0</span><br><span class="line">ip link set dev br0 up</span><br></pre></td></tr></tbody></table></figure>

<p>å»ºç«‹ veth peer ä¸¦ä¸”å‘½åç‚º left-eth0, left-veth0<br>left-eth0 é€™ç«¯è¦æ”¾å…¥ Container çš„ Network Namespace ä¸­</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link add dev left-eth0 type veth peer name left-veth0</span><br><span class="line">ip link add dev right-eth0 type veth peer name right-veth0</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ™‚ä½ çš„ Host ä¸Šæœƒæœ‰å››å€‹æ–°å¢çš„ä»‹é¢</p>
<p>å–å¾— Containers çš„ Pid ç”¨ä¾†å°‡ peer åŠ å…¥è©² Pid çš„ Network Namespace</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">left_pid=$(docker inspect left -f {{.State.Pid}})</span><br><span class="line">right_pid=$(docker inspect right -f {{.State.Pid}})</span><br><span class="line"></span><br><span class="line">ip link set left-eth0 netns ${left_pid} name eth0</span><br><span class="line">ip link set right-eth0 netns ${right_pid} name eth0</span><br></pre></td></tr></tbody></table></figure>

<p>åŠ å…¥æˆåŠŸå¾Œï¼Œåœ¨ Host ä¸Šå¯ä»¥çœ‹åˆ°ç¶²å¡å¾å‰›æ‰çš„å››å€‹è®Šæˆå…©å€‹</p>
<p>åœ¨ Container ä¸­ä¹Ÿæœƒçœ‹åˆ°è£¡é¢çš„ä»‹é¢å¤šäº† eth0</p>
<p>å°‡ veth peer å¦ä¸€ç«¯æ¥ä¸Šæˆ‘å€‘è‡ªè¡Œæ–°å¢çš„ Linux Bridgeï¼Œä¸¦ä¸”å°‡ç¶²å¡å•Ÿå‹•</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brctl addif br0 left-veth0</span><br><span class="line">brctl addif br0 right-veth0</span><br><span class="line"></span><br><span class="line">ip link set dev left-veth0 up</span><br><span class="line">ip link set dev right-veth0 up</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ä¸‹ä¾†æˆ‘å€‘è¦å¾ Host ä¸Šè¨­å®š Container ä¸­çš„ä»‹é¢ï¼Œå› ç‚ºè©²å·²ç¶“åœ¨ä¸åŒç¶²è·¯ç©ºé–“ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦è‡ªè¡Œ mappingï¼Œä¸ç„¶ iproute2 æœƒæ‰¾ä¸åˆ°è©²ç¶²è·¯ä»‹é¢</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -s /proc/$left_pid/ns/net /var/run/netns/$left_pid</span><br><span class="line">ln -s /proc/$right_pid/ns/net /var/run/netns/$right_pid</span><br><span class="line">ip netns show</span><br></pre></td></tr></tbody></table></figure>

<p>é‚£ç‚ºä½•ä¸åœ¨ Container ä¸­åšè¨­å®šï¼Ÿå› ç‚ºé€™æ¨£å­éœ€è¦ Container å…·å‚™ç‰¹å®šçš„ Linux Capability</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip netns exec $left_pid ip addr add 10.113.1.1/24 dev eth0</span><br><span class="line">ip netns exec $left_pid ip link set eth0 up</span><br><span class="line">ip netns exec $right_pid ip addr add 10.113.1.2/24 dev eth0</span><br><span class="line">ip netns exec $right_pid ip link set eth0 up</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ä¸‹ä¾†å°±å¯ä»¥ä½¿ç”¨ ping ä¾†æª¢æŸ¥æ˜¯å¦ Containers ä¹‹é–“ç¶²è·¯æœ‰é€š</p>
<p>docker exec left ping 10.113.1.2 -c3<br>docker exec right ping 10.113.1.1 -c3</p>
<p>å¦‚æœæ²’é€šçš„è©±ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ iptables çš„ FORWARD chain æ˜¯ä¸æ˜¯è¢« DROP æ‰äº†ï¼Œæ˜¯çš„è©±å…ˆæŠŠ Policy æ”¹æˆ ACCEPT å³å¯</p>
<p>é€šå¸¸æˆ‘å€‘ä½¿ç”¨ Docker å»å»ºç«‹ Bridge çš„è©±ï¼Œé€™äº› iptables è¦å‰‡éƒ½æ˜¯ Docker å¹«æˆ‘å€‘è™•ç†çš„ï¼Œæ‰€ä»¥æˆ‘å€‘ç¾åœ¨éœ€è¦è‡ªè¡Œä¿®æ”¹ iptablesã€‚</p>
<h2 id="é¡Œå¤–"><a href="#é¡Œå¤–" class="headerlink" title="é¡Œå¤–"></a>é¡Œå¤–</h2><p>Docker æä¾›çš„ç¶²è·¯é¸é …ä¸å¤šï¼Œç•¢ç«Ÿä»–ä¸»è¦æ˜¯ç”¨ä¾†åšè³‡æºéš”é›¢ã€‚é™¤äº†ä»¥ä¸Šå•é¡Œæ²’è¾¦æ³•ç”¨å…§å»ºçš„ç¶²è·¯é¸é …å¤–ï¼Œä¸€å€‹ Container å‡è¨­æœ‰å¤šå€‹ç¶²è·¯ç’°å¢ƒï¼Œä¹Ÿæ²’è¾¦æ³•åœ¨ Container å•Ÿå‹•æ™‚æŒ‡å®šé è¨­è·¯ç”±ï¼Œåªèƒ½ç”¨æ¯”è¼ƒæ‹å½æŠ¹è§’çš„æ–¹å¼åœ¨ entrypoint æˆ–æ˜¯ commands åšã€‚</p>
</body></html>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.yiyu0x.org/2021/04/29/" data-id="cm9es89ch0014shrp3jnu2k9x" data-title="ä½¿ç”¨ iproute2 å®¢è£½åŒ–ä½ çš„ Container ç¶²è·¯" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/21/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          å¦‚ä½•å‚™ä»½ Kubernetes ä¸­çš„ etcd
        
      </div>
    </a>
  
  
    <a href="/2021/04/17/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ä¸åœæ©Ÿæ›¿æ› Kubernetes CRI</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI/CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/" rel="tag">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DroneCI/" rel="tag">DroneCI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EKS/" rel="tag">EKS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELB/" rel="tag">ELB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cgroup/" rel="tag">cgroup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctf/" rel="tag">ctf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fp/" rel="tag">fp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http2/" rel="tag">http2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/" rel="tag">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/" rel="tag">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/" rel="tag">macos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oauth2/" rel="tag">oauth2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/podman/" rel="tag">podman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/" rel="tag">raspberry_pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/" rel="tag">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/telegram/" rel="tag">telegram</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/" rel="tag">tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/traefik/" rel="tag">traefik</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%80%8B%E4%BA%BA/" rel="tag">å€‹äºº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/" rel="tag">è³‡è¨Šå®‰å…¨</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AWS/" style="font-size: 12.5px;">AWS</a> <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/DroneCI/" style="font-size: 10px;">DroneCI</a> <a href="/tags/EKS/" style="font-size: 12.5px;">EKS</a> <a href="/tags/ELB/" style="font-size: 10px;">ELB</a> <a href="/tags/Kubernetes/" style="font-size: 15px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/c/" style="font-size: 12.5px;">c</a> <a href="/tags/cgroup/" style="font-size: 10px;">cgroup</a> <a href="/tags/container/" style="font-size: 10px;">container</a> <a href="/tags/ctf/" style="font-size: 10px;">ctf</a> <a href="/tags/docker/" style="font-size: 17.5px;">docker</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/fp/" style="font-size: 10px;">fp</a> <a href="/tags/http2/" style="font-size: 10px;">http2</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/kubernetes/" style="font-size: 20px;">kubernetes</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/macos/" style="font-size: 15px;">macos</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 12.5px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/oauth2/" style="font-size: 10px;">oauth2</a> <a href="/tags/podman/" style="font-size: 10px;">podman</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry_pi</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/telegram/" style="font-size: 10px;">telegram</a> <a href="/tags/tools/" style="font-size: 12.5px;">tools</a> <a href="/tags/traefik/" style="font-size: 10px;">traefik</a> <a href="/tags/%E5%80%8B%E4%BA%BA/" style="font-size: 15px;">å€‹äºº</a> <a href="/tags/%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/" style="font-size: 15px;">è³‡è¨Šå®‰å…¨</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">å››æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">ä¹æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">å…«æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">ä¸ƒæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">åäºŒæœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">åä¸€æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">äº”æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">å››æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">ä¸‰æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">ä¸€æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">å…«æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">ä¸ƒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">å››æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">ä¸‰æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">äºŒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">ä¸€æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">åäºŒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">åæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">å…«æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">å…­æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">äºŒæœˆ 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/04/12/">test</a>
          </li>
        
          <li>
            <a href="/2025/04/12/">2025 Life Update</a>
          </li>
        
          <li>
            <a href="/2022/09/05/">EKS ELB ç²å– Client IP æ–¹æ³•ç´€éŒ„</a>
          </li>
        
          <li>
            <a href="/2022/08/30/">å»ºç«‹ Reliable EKS è¨˜éŒ„</a>
          </li>
        
          <li>
            <a href="/2022/07/07/">åœ¨ macOS ä¸Šä½¿ç”¨ Podman</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 yiyu0x<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>